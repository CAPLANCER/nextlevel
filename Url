def Generate_URI_For_Text(file_path):
    # Ensure your API key is appended correctly
    upload_url = f"https://your-api-endpoint-for-upload?key={API_KEY}"
    
    try:
        mime_type, _ = mimetypes.guess_type(file_path)
        if mime_type is None:
            mime_type = 'text/plain'

        with open(file_path, 'rb') as raw_file:
            files = {
                'file': (os.path.basename(file_path), raw_file, mime_type)  
            }
            
            # Using your corporate proxy settings
            response = requests.post(
                upload_url, 
                files=files, 
                proxies=Proxies, 
                verify=False,
                timeout=TIMEOUT_SECONDS
            )

            # DEBUG: Print the raw status and text if it's not JSON
            print(f"Status Code: {response.status_code}")
            
            if response.status_code == 200:
                try:
                    res = response.json()
                    uri = res.get("file", {}).get("uri")
                    return uri, mime_type
                except ValueError:
                    print("Error: Server returned 200 OK, but the body was not JSON.")
                    print(f"Raw Response: {response.text}")
                    return None, None
            else:
                print(f"Upload Failed. Server returned: {response.text}")
                return None, None

    except Exception as e:
        print(f"Connection Error: {e}")
        return None, None
